<!doctype html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>TÃ¡bor Helper</title>
  <link rel="manifest" href="manifest.webmanifest?v=24">
  <meta name="theme-color" content="#0ea5e9"/>
  <link rel="icon" href="icons/icon-192.png">
  <link rel="apple-touch-icon" href="icons/maskable-512.png">
  <link rel="stylesheet" href="styles.v24.css">
</head>
<body>
  <div id="updateBanner" class="banner" style="display:none">
    Aktualizuji aplikaciâ€¦ prosÃ­m **obnov** strÃ¡nku jeÅ¡tÄ› jednou.
  </div>

  <header class="topbar">
    <div class="brand">
      <span class="logo">ğŸ•ï¸</span>
      <div class="titles">
        <h1>TÃ¡bor Helper</h1>
        <small class="muted">rychlÃ© nÃ¡stroje pro vedoucÃ­</small>
      </div>
    </div>
    <div class="actions">
      <button id="themeBtn" title="PÅ™epnout tÃ©ma">ğŸŒ“</button>
      <button id="installBtn" class="primary" hidden>Instalovat</button>
    </div>
  </header>

  <nav class="tabs" role="tablist">
    <button class="tab active" data-tab="games" aria-selected="true">ğŸ² Hry</button>
    <button class="tab" data-tab="teams" aria-selected="false">ğŸ‘¥ TÃ½my</button>
    <button class="tab" data-tab="planner" aria-selected="false">ğŸ—“ï¸ PlÃ¡n dne</button>
  </nav>

  <main>
    <!-- HRY -->
    <section id="tab-games" class="tabpanel active">
      <div class="grid two">
        <div class="card">
          <div class="card-head">
            <h2>VÅ¡echny hry</h2>
            <div class="row">
              <select id="categoryFilter"></select>
              <input id="searchInput" placeholder="Hledat podle nÃ¡zvu, poznÃ¡mekâ€¦">
              <button id="addGameBtn" class="ghost">+ NovÃ¡ hra</button>
            </div>
          </div>
          <ul id="gamesList" class="list"></ul>
          <p id="emptyHint" class="muted" style="display:none;padding:8px">Å½Ã¡dnÃ© hry zatÃ­m nejsou. PÅ™idej prvnÃ­ pÅ™es â€NovÃ¡ hraâ€œ.</p>

          <div class="card" style="margin-top:8px; border-style:dashed">
            <div class="card-head"><h3>ğŸ”§ NastavenÃ­ &amp; data</h3></div>
            <div class="row">
              <button id="seedBtn" class="primary">PÅ™idat balÃ­k her (80)</button>
              <button id="exportBtn">Exportovat hry (JSON)</button>
              <label class="row" style="gap:6px">Import (JSON)
                <input id="importFile" type="file" accept=".json,application/json">
              </label>
              <button id="resetBtn" class="danger">Vymazat vÅ¡echny hry</button>
            </div>
            <p class="muted">BalÃ­k doplnÃ­ chybÄ›jÃ­cÃ­ hry bez duplicit podle <em>nÃ¡zvu</em>.</p>
          </div>
        </div>
        <div class="card">
          <div class="card-head">
            <h2>Detail â€¢ vysvÄ›tlenÃ­ & pomÅ¯cky</h2>
            <div class="row">
              <button id="randomBtn" class="primary">Losuj</button>
              <button id="duplicateBtn" class="ghost" disabled>Zduplikovat</button>
              <button id="deleteBtn" class="danger" disabled>Smazat</button>
            </div>
          </div>
          <div id="gameDetail" class="game-detail empty">
            <p class="muted">Vyber hru vlevo nebo ji losuj.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- TÃMY -->
    <section id="tab-teams" class="tabpanel">
      <div class="grid two">
        <div class="card">
          <div class="card-head"><h2>JmÃ©na dÄ›tÃ­</h2></div>
          <label>KaÅ¾dÃ© na novÃ½ Å™Ã¡dek nebo oddÄ›lenÃ© ÄÃ¡rkou</label>
          <textarea id="playersText" rows="10" placeholder="JmÃ©noâ€¦">Adam
BÃ¡ra
Cyril
Dana
Eva
Filip
GÃ¡bina
Honza</textarea>
          <div class="row">
            <label>PoÄet tÃ½mÅ¯ <input id="teamsCount" type="number" min="2" max="12" value="2"></label>
            <button id="genTeamsBtn" class="primary">Vygenerovat tÃ½my</button>
          </div>
          <div class="muted">Data se uklÃ¡dajÃ­ automaticky.</div>
        </div>
        <div class="card">
          <div class="card-head"><h2>LosovÃ¡nÃ­ tÃ½mÅ¯</h2></div>
          <div id="teamsOut" class="teams"></div>
        </div>
      </div>
    </section>

    <!-- PLÃN DNE -->
    <section id="tab-planner" class="tabpanel">
      <div class="card">
        <div class="card-head">
          <h2>PlÃ¡n dne</h2>
          <div class="row">
            <input id="slotTime" placeholder="10:00">
            <input id="slotTitle" placeholder="NÃ¡zev aktivity">
            <button id="addSlotBtn" class="primary">PÅ™idat poloÅ¾ku</button>
            <button id="clearPlanBtn" class="danger">Vymazat plÃ¡n</button>
          </div>
        </div>
        <ul id="planList" class="plan"></ul>
        <div class="muted">Tip: klikni na Äas pro rychlou Ãºpravu. PlÃ¡n je uloÅ¾en lokÃ¡lnÄ›.</div>
      </div>
    </section>
  </main>

  <!-- Dialog: edit game -->
  <dialog id="gameDialog">
    <form method="dialog" id="gameForm">
      <h3 id="dlgTitle">NovÃ¡ hra</h3>
      <div class="grid two">
        <label>NÃ¡zev<input name="name" required></label>
        <label>Kategorie<input name="category" placeholder="Venku, U ohnÄ›â€¦"></label>
      </div>
      <div class="grid two">
        <label>DÃ©lka (min)<input type="number" name="duration" min="1" value="10"></label>
        <label>PomÅ¯cky (ÄÃ¡rkou)<input name="equipment" placeholder="mÃ­Äek, kuÅ¾elyâ€¦"></label>
      </div>
      <label>VysvÄ›tlenÃ­ / pravidla<textarea name="rules" rows="5" placeholder="Jak se to hrajeâ€¦"></textarea></label>
      <menu>
        <button value="cancel">ZruÅ¡it</button>
        <button id="saveGameBtn" value="default" class="primary">UloÅ¾it</button>
      </menu>
    </form>
  </dialog>

  <footer class="bottombar">
    <span class="muted">PWA â€¢ offline â€¢ vÅ¡e se pamatuje</span>
    <button id="shareBtn">SdÃ­let</button>
  </footer>

  <script type="module" src="app.v24.js"></script>
  <script>
    // Register versioned SW and show banner during update
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', async () => {
        const reg = await navigator.serviceWorker.register('service-worker-v24.js');
        reg.addEventListener('updatefound', ()=>{ document.getElementById('updateBanner').style.display='block'; });
      });
    }
  </script>
</body>
</html>
